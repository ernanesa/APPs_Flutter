{
	"version": "2.0.0",
	"inputs": [
		{
			"id": "appPath",
			"type": "promptString",
			"description": "Relative path to the Flutter app folder",
			"default": "app_name"
		}
	],
	"tasks": [
		{
			"label": "Android: ADB Devices",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-Command",
				"& \"C:\\dev\\android-sdk\\platform-tools\\adb.exe\" devices"
			],
			"problemMatcher": []
		},
		{
			"label": "Flutter: Pub Get",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-Command",
				"& \"C:\\dev\\flutter\\bin\\flutter.bat\" pub get"
			],
			"options": {
				"cwd": "${workspaceFolder}\\${input:appPath}"
			},
			"problemMatcher": []
		},
		{
			"label": "Flutter: Gen L10n",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-Command",
				"& \"C:\\dev\\flutter\\bin\\flutter.bat\" gen-l10n"
			],
			"options": {
				"cwd": "${workspaceFolder}\\${input:appPath}"
			},
			"problemMatcher": []
		},
		{
			"label": "Flutter: Analyze",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-Command",
				"& \"C:\\dev\\flutter\\bin\\flutter.bat\" analyze"
			],
			"options": {
				"cwd": "${workspaceFolder}\\${input:appPath}"
			},
			"problemMatcher": []
		},
		{
			"label": "Flutter: Test",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-Command",
				"& \"C:\\dev\\flutter\\bin\\flutter.bat\" test"
			],
			"options": {
				"cwd": "${workspaceFolder}\\${input:appPath}"
			},
			"problemMatcher": []
		},
		{
			"label": "Flutter: Build AAB (release)",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-Command",
				"& \"C:\\dev\\flutter\\bin\\flutter.bat\" build appbundle --release"
			],
			"options": {
				"cwd": "${workspaceFolder}\\${input:appPath}"
			},
			"problemMatcher": []
		},
		{
			"label": "Guardrail: Check L10n Keys",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-File",
				"${workspaceFolder}\\tools\\check_l10n.ps1",
				"-AppPath",
				"${workspaceFolder}\\${input:appPath}"
			],
			"problemMatcher": []
		},
		{
			"label": "Assets: Check Store Assets",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-File",
				"${workspaceFolder}\\tools\\check_store_assets.ps1",
				"-AssetsDir",
				"${workspaceFolder}\\DadosPublicacao\\${input:appPath}\\store_assets"
			],
			"problemMatcher": []
		},
		{
			"label": "Flutter: Validate (l10n+analyze+test)",
			"type": "shell",
			"dependsOn": [
				"Guardrail: Check L10n Keys",
				"Flutter: Gen L10n",
				"Flutter: Analyze",
				"Flutter: Test"
			],
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-Command",
				"Write-Host 'OK: validate finished'"
			],
			"problemMatcher": []
		},
		{
			"label": "Run Fasting Tracker",
			"type": "shell",
			"command": "pwsh -NoProfile -Command \"Set-Location 'C:\\Users\\Ernane\\Personal\\APPs_Flutter\\fasting_tracker'; & 'C:\\dev\\flutter\\bin\\flutter.bat' run -d emulator-5554\""
		},
		{
			"label": "ADB: White Noise UI Dump",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-Command",
				"& \"C:\\dev\\android-sdk\\platform-tools\\adb.exe\" shell am start -n sa.rezende.white_noise/.MainActivity; Start-Sleep -Seconds 2; & \"C:\\dev\\android-sdk\\platform-tools\\adb.exe\" shell uiautomator dump /sdcard/ui.xml; & \"C:\\dev\\android-sdk\\platform-tools\\adb.exe\" shell cat /sdcard/ui.xml"
			],
			"isBackground": false,
			"problemMatcher": [],
			"group": "test"
		},
		{
			"label": "ADB: Pull White Noise UI XML",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-Command",
				"& \"C:\\dev\\android-sdk\\platform-tools\\adb.exe\" pull /sdcard/ui.xml \"C:\\Users\\Ernane\\Personal\\APPs_Flutter\\white_noise\\ui.xml\""
			],
			"isBackground": false,
			"problemMatcher": [],
			"group": "test"
		},
		{
			"label": "ADB: Tap FAB and Dump UI",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-Command",
				"& \"C:\\dev\\android-sdk\\platform-tools\\adb.exe\" shell input tap 959 2027; Start-Sleep -Seconds 1; & \"C:\\dev\\android-sdk\\platform-tools\\adb.exe\" shell uiautomator dump /sdcard/ui.xml"
			],
			"isBackground": false,
			"problemMatcher": [],
			"group": "test"
		},
		{
			"label": "ADB: Pull White Noise UI XML (After Tap)",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-Command",
				"& \"C:\\dev\\android-sdk\\platform-tools\\adb.exe\" pull /sdcard/ui.xml \"C:\\Users\\Ernane\\Personal\\APPs_Flutter\\white_noise\\ui.xml\""
			],
			"isBackground": false,
			"problemMatcher": [],
			"group": "test"
		},
		{
			"label": "Run White Noise",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-Command",
				"Set-Location -Path \"C:\\Users\\Ernane\\Personal\\APPs_Flutter\\white_noise\"; & \"C:\\dev\\flutter\\bin\\flutter.bat\" run -d emulator-5554"
			],
			"isBackground": true,
			"problemMatcher": [],
			"group": "build"
		},
		{
			"label": "ADB: White Noise UI Dump (Now)",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-Command",
				"& \"C:\\dev\\android-sdk\\platform-tools\\adb.exe\" shell am start -n sa.rezende.white_noise/.MainActivity; Start-Sleep -Seconds 2; & \"C:\\dev\\android-sdk\\platform-tools\\adb.exe\" shell uiautomator dump /sdcard/ui.xml; & \"C:\\dev\\android-sdk\\platform-tools\\adb.exe\" shell cat /sdcard/ui.xml"
			],
			"isBackground": false,
			"problemMatcher": [],
			"group": "test"
		},
		{
			"label": "ADB: White Noise UI Dump (Validate)",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-Command",
				"& \"C:\\dev\\android-sdk\\platform-tools\\adb.exe\" shell am start -n sa.rezende.white_noise/.MainActivity; Start-Sleep -Seconds 2; & \"C:\\dev\\android-sdk\\platform-tools\\adb.exe\" shell uiautomator dump /sdcard/ui.xml; & \"C:\\dev\\android-sdk\\platform-tools\\adb.exe\" pull /sdcard/ui.xml \"C:\\Users\\Ernane\\Personal\\APPs_Flutter\\white_noise\\ui.xml\""
			],
			"isBackground": false,
			"problemMatcher": [],
			"group": "test"
		},
		{
			"label": "Run White Noise (Fixed CWD)",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-Command",
				"Set-Location -Path \"C:\\Users\\Ernane\\Personal\\APPs_Flutter\\white_noise\"; & \"C:\\dev\\flutter\\bin\\flutter.bat\" run -d emulator-5554"
			],
			"isBackground": true,
			"problemMatcher": [],
			"group": "build"
		}
	]
}